
<tech-stack>
## 整体架构图
```markdown
┌─────────────────────────────────────────────────────────────────┐
│                         客户端层 (Client Layer)                  │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │              Electron 桌面应用 (跨平台)                   │   │
│  │  ┌────────────────────────────────────────────────────┐  │   │
│  │  │  React 18 + TypeScript + Ant Design 5              │  │   │
│  │  │  ┌──────────┬──────────┬──────────┬──────────┐    │  │   │
│  │  │  │ 搜索界面 │ 结果展示 │ 设置管理 │ 文件预览 │    │  │   │
│  │  │  └──────────┴──────────┴──────────┴──────────┘    │  │   │
│  │  └────────────────────────────────────────────────────┘  │   │
│  │  状态管理: Zustand + React Query                          │   │
│  └──────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                                ↓ IPC通信
┌─────────────────────────────────────────────────────────────────┐
│                      Electron Main Process                       │
│  - 窗口管理  - 文件系统访问  - 进程管理  - 系统托盘            │
└─────────────────────────────────────────────────────────────────┘
                                ↓ HTTP/WebSocket
┌─────────────────────────────────────────────────────────────────┐
│                       后端服务层 (Backend Layer)                 │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │              FastAPI 服务 (Python 3.10+)                 │   │
│  │  ┌────────────────────────────────────────────────────┐  │   │
│  │  │                    API路由层                        │  │   │
│  │  │  /search  /index  /files  /settings  /ai          │  │   │
│  │  └────────────────────────────────────────────────────┘  │   │
│  │  ┌────────────────────────────────────────────────────┐  │   │
│  │  │                   业务逻辑层                        │  │   │
│  │  │  ┌──────────┬──────────┬──────────┬──────────┐    │  │   │
│  │  │  │ 搜索引擎 │ 索引管理 │ 用户管理 │ 文件管理 │    │  │   │
│  │  │  └──────────┴──────────┴──────────┴──────────┘    │  │   │
│  │  └────────────────────────────────────────────────────┘  │   │
│  └──────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                                ↓
┌─────────────────────────────────────────────────────────────────┐
│                      AI服务层 (AI Service Layer)                 │
│  ┌──────────────┬──────────────┬──────────────┬──────────────┐  │
│  │  LLM服务     │  ASR服务     │  视觉服务    │  Embedding   │  │
│  │  ┌────────┐  │  ┌────────┐  │  ┌────────┐  │  ┌────────┐  │  │
│  │  │Ollama  │  │  │Whisper │  │  │CN-CLIP │  │  │  BGE   │  │  │
│  │  │(本地)  │  │  │(本地)  │  │  │(本地)  │  │  │(本地)  │  │  │
│  │  └────────┘  │  └────────┘  │  └────────┘  │  └────────┘  │  │
│  │  ┌────────┐  │  ┌────────┐  │  ┌────────┐  │              │  │
│  │  │OpenAI  │  │  │云端API │  │  │GPT-4V  │  │              │  │
│  │  │(云端)  │  │  │(云端)  │  │  │(云端)  │  │              │  │
│  │  └────────┘  │  └────────┘  │  └────────┘  │              │  │
│  └──────────────┴──────────────┴──────────────┴──────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                                ↓
┌─────────────────────────────────────────────────────────────────┐
│                    数据存储层 (Storage Layer)                    │
│  ┌──────────────┬──────────────┬──────────────┬──────────────┐  │
│  │  向量索引    │  全文索引    │  元数据库    │  文件系统    │  │
│  │  ┌────────┐  │  ┌────────┐  │  ┌────────┐  │  ┌────────┐  │  │
│  │  │ Faiss  │  │  │Whoosh  │  │  │SQLite  │  │  │ 本地   │  │  │
│  │  │.index  │  │  │索引目录│  │  │ .db    │  │  │ 文件   │  │  │
│  │  └────────┘  │  └────────┘  │  └────────┘  │  └────────┘  │  │
│  └──────────────┴──────────────┴──────────────┴──────────────┘  │
│                                                                   │
│  存储路径: ~/.ai-search/                                         │
│    ├── data.db              (SQLite元数据)                       │
│    ├── faiss.index          (Faiss向量索引)                      │
│    ├── faiss.index.map      (ID映射文件)                         │
│    ├── whoosh_index/        (Whoosh索引目录)                     │
│    ├── cache/               (缓存目录)                           │
│    └── logs/                (日志目录)                           │
└─────────────────────────────────────────────────────────────────┘
```

## 技术选型
前端	
- Electron	27.0+	跨平台桌面应用框架
- React	18.2+	UI框架
- TypeScript	5.2+	类型安全
- Ant Design	5.11+	UI组件库
- Zustand	4.4+	轻量级状态管理
- React Query	5.8+	数据请求管理

后端	
- Python	3.10+	后端语言
- FastAPI	0.104+	高性能Web框架
- Uvicorn	0.24+	ASGI服务器

AI模型	
- PyTorch	2.1+	深度学习框架
- Transformers	4.35+	HuggingFace模型库
- FlagEmbedding	1.2+	BGE Embedding模型
- Whisper	20231117	语音识别模型
- CN-CLIP	1.5+	中文视觉理解模型

检索	
- Faiss	1.7.4	向量检索引擎
- Whoosh	2.7.4	全文检索引擎

数据库	
- SQLite	3.x	嵌入式关系数据库
文件处理	
- Marker	0.2+	PDF转Markdown
- PaddleOCR	2.7+	中文OCR
- FFmpeg	4.x+	音视频处理

其他	
- watchdog	3.0+	文件系统监控

</tech-stack>