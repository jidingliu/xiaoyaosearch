# 产品需求文档

# 小遥搜索

## 产品定位
- 产品名称: 小遥搜索
- 英文名称：XiaoyaoSearch
- 核心价值: 为个人用户提供跨平台(Windows/Mac/Linux)的本地文件智能搜索工具,通过AI多模态理解能力,实现文本、语音、图片、视频等多种文件的语义化检索,提升个人知识管理效率。
- 目标用户: 需要管理大量本地文件(1万以内)的个人用户,如知识工作者、内容创作者、研究人员等。

## 目标
- 快速原型

## 产品功能
# 产品功能清单

## 一、核心功能模块

### 1.1 搜索功能 🔍

#### 1.1.1 多模态输入方式
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 文本搜索 | 支持自然语言输入查询 | **P0** |
| 语音搜索 | 实时语音转文字搜索(30秒内) | **P1** |
| 图片搜索 | 上传图片进行以图搜图 | **P1** |
| 音频搜索 | 上传音频文件进行内容匹配(30秒内) | **P2** |

#### 1.1.2 智能搜索能力
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 语义理解 | 理解查询意图,非精确匹配 | **P0** |
| 时间解析 | 识别"上周""最近三天"等时间表达 | **P0** |
| 文件类型识别 | 自动识别"PPT""图片"等类型 | **P0** |
| 联想提示 | 输入时显示历史查询和建议 | **P1** |
| 查询改写 | 自动优化查询语句 | **P2** |

#### 1.1.3 搜索结果展示
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 结果列表 | 展示匹配文件列表(文件名/路径/时间/大小) | **P0** |
| 匹配度得分 | 显示每个结果的相关性分数 | **P0** |
| 内容摘要 | 展示匹配内容的上下文摘要 | **P0** |
| 关键词高亮 | 高亮显示匹配的关键词 | **P0** |
| 结果数量统计 | 显示"找到XX个结果" | **P0** |
| 分页/滚动加载 | 分批加载结果,避免卡顿 | **P0** |
| 视图切换 | 列表视图/卡片视图切换 | **P1** |

#### 1.1.4 结果筛选与排序
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 文件类型筛选 | 按文档/图片/音频/视频筛选 | **P0** |
| 时间范围筛选 | 选择创建/修改时间范围 | **P0** |
| 相关度排序 | 按匹配度排序(默认) | **P0** |
| 时间排序 | 按创建/修改时间排序 | **P0** |
| 文件大小筛选 | 按文件大小区间筛选 | **P1** |
| 目录筛选 | 按所在目录筛选 | **P1** |
| 文件名排序 | 按文件名A-Z排序 | **P1** |
| 文件大小排序 | 按大小排序 | **P1** |

#### 1.1.5 文件预览
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 文档预览 | 预览文档内容,支持翻页 | **P0** |
| 图片预览 | 大图预览,支持缩放 | **P0** |
| 视频预览 | 内嵌播放器,跳转到匹配时间点 | **P1** |
| 音频预览 | 音频播放器,跳转到匹配时间点 | **P1** |
| 字幕显示 | 视频/音频显示转录字幕 | **P1** |
| 快捷键切换 | 上下键切换预览文件 | **P1** |

#### 1.1.6 快速操作
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 打开文件 | 用默认应用打开文件 | **P0** |
| 打开所在目录 | 在文件管理器中定位文件 | **P0** |
| 复制路径 | 复制文件完整路径 | **P0** |
| 右键菜单 | 右键显示操作菜单 | **P0** |
| 收藏文件 | 添加到收藏夹 | **P1** |
| 删除文件 | 删除文件(需确认) | **P1** |

---

### 1.2 文件索引管理 📁

#### 1.2.1 目录管理
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 添加扫描目录 | 选择要索引的文件夹 | **P0** |
| 删除扫描目录 | 移除不需要索引的目录 | **P0** |
| 目录列表展示 | 显示所有已添加的目录 | **P0** |
| 目录状态显示 | 显示每个目录的索引状态和文件数 | **P0** |
| 重新扫描目录 | 手动触发目录重新扫描 | **P0** |
| 排除目录(黑名单) | 排除特定子目录不索引 | **P1** |

#### 1.2.2 文件扫描
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 首次全量扫描 | 首次添加目录时全量扫描 | **P0** |
| 增量扫描 | 仅扫描新增/修改的文件 | **P0** |
| 实时监控 | 监控文件变化(增删改) | **P0** |
| 扫描进度显示 | 显示扫描进度条和当前文件 | **P0** |
| 后台扫描 | 扫描不阻塞主界面 | **P0** |
| 暂停/继续扫描 | 控制扫描过程 | **P1** |

#### 1.2.3 索引管理
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 索引统计 | 显示已索引文件数/占用空间 | **P0** |
| 索引状态 | 显示索引是否最新 | **P0** |
| 清空索引 | 删除所有索引数据 | **P1** |
| 重建索引 | 重新构建全部索引 | **P1** |
| 索引优化 | 压缩和优化索引 | **P2** |
| 索引备份 | 导出索引数据 | **P2** |
| 索引恢复 | 导入索引数据 | **P2** |

#### 1.2.4 文件类型支持
| 文件类型 | 支持格式 | 提取内容 | 优先级 |
|---------|---------|---------|--------|
| 文档类 | PDF, Word, Excel, PPT, TXT, Markdown | 全文文本、元数据、结构 | **P0** |
| 图片类 | JPG, PNG | OCR文字、语义标签、EXIF | **P1** |
| 音频类 | MP3, WAV | 语音转文字、元数据 | **P1** |
| 视频类 | MP4, AVI | 音频转文字、关键帧标签 | **P2** |

---

### 1.3 用户系统 👤

#### 1.3.1 本地用户(MVP)
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 无感知登录 | 首次启动自动创建本地用户 | **P0** |
| 用户ID生成 | 自动生成UUID作为用户标识 | **P0** |
| 本地数据隔离 | 所有数据关联用户ID | **P0** |

#### 1.3.2 云端账号(未来扩展)
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 账号注册 | 邮箱注册云端账号 | **P3** |
| 账号登录 | 邮箱密码登录 | **P3** |
| 绑定本地用户 | 将本地用户绑定到云端账号 | **P3** |
| 数据同步 | 同步索引和设置到云端 | **P3** |

---

### 1.4 设置与配置 ⚙️

#### 1.4.1 搜索设置
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 默认搜索模式 | 选择语义搜索/关键词搜索/混合 | **P1** |
| 结果数量 | 设置每页显示结果数 | **P1** |
| 默认排序方式 | 设置默认排序规则 | **P1** |

#### 1.4.2 索引设置
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 文件类型选择 | 选择要索引的文件类型 | **P1** |
| 文件大小限制 | 设置单文件大小上限 | **P1** |
| 视频处理时长 | 设置视频处理时长(默认3分钟) | **P1** |
| 索引更新频率 | 设置文件监控更新频率 | **P2** |
| 关键帧数量 | 设置视频提取帧数(默认15帧) | **P2** |

#### 1.4.3 AI模型设置
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 运行模式选择 | 本地模式/云端模式/混合模式 | **P0** |
| LLM配置 | 选择Ollama本地模型或OpenAI API | **P0** |
| API密钥管理 | 配置OpenAI等API密钥 | **P0** |
| ASR配置 | 选择Whisper本地或云端API | **P1** |
| 视觉模型配置 | 选择Chinese-CLIP本地或GPT-4V | **P1** |
| 模型下载 | 下载和管理本地模型 | **P1** |

#### 1.4.4 性能设置
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| GPU加速 | 启用/禁用GPU加速 | **P1** |
| 内存限制 | 设置最大内存使用量 | **P1** |
| 并发数量 | 设置索引并发线程数 | **P2** |
| 缓存大小 | 设置查询缓存大小 | **P2** |

#### 1.4.5 隐私设置
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 搜索历史 | 启用/禁用搜索历史记录 | **P1** |
| 历史记录数量 | 设置保留历史记录数量 | **P1** |
| 敏感目录排除 | 排除敏感目录不索引 | **P1** |
| 数据加密 | 启用索引数据加密 | **P2** |

#### 1.4.6 界面设置
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 主题切换 | 浅色/深色主题 | **P1** |
| 语言切换 | 中文/英文 | **P2** |
| 字体大小 | 调整界面字体大小 | **P2** |
| 快捷键设置 | 自定义快捷键 | **P2** |

---

### 1.5 历史与收藏 ⭐

#### 1.5.1 搜索历史
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 历史记录列表 | 显示最近搜索记录(时间倒序) | **P1** |
| 点击快速搜索 | 点击历史记录重新搜索 | **P1** |
| 删除单条历史 | 删除特定历史记录 | **P1** |
| 清空历史 | 一键清空所有历史 | **P1** |
| 历史搜索 | 在历史记录中搜索 | **P2** |

#### 1.5.2 收藏夹
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 添加收藏 | 收藏常用文件 | **P1** |
| 取消收藏 | 移除收藏 | **P1** |
| 收藏列表 | 查看所有收藏文件 | **P1** |
| 收藏分组 | 创建分组管理收藏 | **P2** |
| 收藏备注 | 为收藏添加备注 | **P2** |
| 收藏导出 | 导出收藏列表 | **P2** |

---

## 二、辅助功能模块

### 2.1 帮助与引导 ❓
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 首次引导 | 首次启动显示功能介绍 | **P0** |
| 帮助文档 | 内置使用手册 | **P1** |
| 搜索示例 | 提供搜索示例 | **P1** |
| 功能提示 | 悬浮提示功能说明 | **P1** |
| 视频教程 | 功能演示视频 | **P2** |

### 2.2 系统信息 ℹ️
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 版本信息 | 显示当前版本号 | **P1** |
| 更新检查 | 检查是否有新版本 | **P1** |
| 系统状态 | 显示索引状态/内存占用等 | **P1** |
| 反馈渠道 | 提供反馈入口 | **P1** |
| 日志查看 | 查看系统日志 | **P2** |

### 2.3 数据管理 💾
| 功能 | 功能描述 | 优先级 |
|------|---------|--------|
| 数据统计 | 显示数据占用情况 | **P1** |
| 数据导出 | 导出索引和设置 | **P2** |
| 数据导入 | 导入索引和设置 | **P2** |
| 清除数据 | 清除所有应用数据 | **P2** |

---

## 📊 优先级说明

- **P0**: 核心功能,MVP必须
- **P1**: 重要功能,提升体验
- **P2**: 增强功能,优化体验
- **P3**: 未来规划,长期目标


