{
  "接口信息": {
    "接口路径": "GET /api/search/history",
    "功能说明": "获取用户搜索历史记录，支持分页查询",
    "请求方式": "GET",
    "Content-Type": "application/json",
    "接口版本": "v1.0.0"
  },
  "请求参数": {
    "正常场景": {
      "limit": 20,
      "offset": 0
    },
    "分页场景": {
      "limit": 10,
      "offset": 20
    },
    "边界场景": {
      "limit": 100,
      "offset": 0
    },
    "参数无效场景": {
      "limit": 0,
      "offset": -1
    },
    "无参数场景": {
      "说明": "使用默认值 limit=20, offset=0"
    }
  },
  "响应数据": {
    "成功响应（有历史记录）": {
      "success": true,
      "data": {
        "history": [
          {
            "id": 1,
            "search_query": "人工智能发展趋势",
            "input_type": "text",
            "search_type": "hybrid",
            "ai_model_used": "bge-m3",
            "result_count": 5,
            "response_time": 0.15,
            "created_at": "2024-01-20T14:30:00Z"
          },
          {
            "id": 2,
            "search_query": "机器学习算法",
            "input_type": "text",
            "search_type": "semantic",
            "ai_model_used": "bge-m3",
            "result_count": 8,
            "response_time": 0.12,
            "created_at": "2024-01-20T13:45:00Z"
          },
          {
            "id": 3,
            "search_query": "请帮我找一些关于深度学习的资料",
            "input_type": "voice",
            "search_type": "hybrid",
            "ai_model_used": "bge-m3+faster-whisper",
            "result_count": 12,
            "response_time": 1.85,
            "created_at": "2024-01-20T11:20:00Z"
          },
          {
            "id": 4,
            "search_query": "数据分析图表，显示销售趋势",
            "input_type": "image",
            "search_type": "semantic",
            "ai_model_used": "bge-m3+cn-clip",
            "result_count": 3,
            "response_time": 0.95,
            "created_at": "2024-01-20T10:15:00Z"
          },
          {
            "id": 5,
            "search_query": "Python编程教程",
            "input_type": "text",
            "search_type": "fulltext",
            "ai_model_used": "bge-m3",
            "result_count": 0,
            "response_time": 0.08,
            "created_at": "2024-01-19T16:30:00Z"
          },
          {
            "id": 6,
            "search_query": "项目管理最佳实践",
            "input_type": "text",
            "search_type": "hybrid",
            "ai_model_used": "bge-m3",
            "result_count": 7,
            "response_time": 0.18,
            "created_at": "2024-01-19T14:25:00Z"
          },
          {
            "id": 7,
            "search_query": "数据库设计原则",
            "input_type": "text",
            "search_type": "semantic",
            "ai_model_used": "bge-m3",
            "result_count": 4,
            "response_time": 0.11,
            "created_at": "2024-01-19T11:40:00Z"
          },
          {
            "id": 8,
            "search_query": "帮我查找API接口文档",
            "input_type": "voice",
            "search_type": "fulltext",
            "ai_model_used": "bge-m3+faster-whisper",
            "result_count": 6,
            "response_time": 1.45,
            "created_at": "2024-01-18T15:50:00Z"
          }
        ],
        "total": 8
      }
    },
    "空历史响应": {
      "success": true,
      "data": {
        "history": [],
        "total": 0
      }
    },
    "分页响应": {
      "success": true,
      "data": {
        "history": [
          {
            "id": 11,
            "search_query": "云计算架构设计",
            "input_type": "text",
            "search_type": "semantic",
            "ai_model_used": "bge-m3",
            "result_count": 9,
            "response_time": 0.14,
            "created_at": "2024-01-15T14:20:00Z"
          },
          {
            "id": 12,
            "search_query": "微服务部署方案",
            "input_type": "text",
            "search_type": "hybrid",
            "ai_model_used": "bge-m3",
            "result_count": 5,
            "response_time": 0.16,
            "created_at": "2024-01-15T13:10:00Z"
          }
        ],
        "total": 25
      }
    },
    "参数验证错误响应": {
      "success": false,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "请求参数验证失败",
        "details": "limit参数必须在1-100之间，offset参数不能为负数"
      }
    },
    "数据库连接错误响应": {
      "success": false,
      "error": {
        "code": "DATABASE_CONNECTION_FAILED",
        "message": "无法连接到历史记录数据库",
        "details": "请检查数据库文件是否存在，或者联系系统管理员"
      }
    }
  },
  "使用说明": {
    "集成方式": "前端分页加载搜索历史，支持下拉刷新和加载更多",
    "测试建议": [
      "测试分页功能，验证limit和offset参数的正确性",
      "测试不同输入类型的历史记录显示",
      "测试空历史记录的界面显示",
      "测试历史记录的时间排序（最新的在前）"
    ],
    "数据用途": [
      "为用户提供快速搜索建议",
      "支持重复执行历史搜索",
      "分析用户搜索习惯和偏好",
      "优化搜索算法和推荐系统"
    ],
    "注意事项": [
      "搜索历史记录包含敏感信息，需要妥善保护",
      "响应时间应控制在100ms以内",
      "支持清空历史记录功能（单独接口）",
      "在隐私模式下不应记录搜索历史"
    ],
    "性能优化": {
      "建议": "对于大量历史记录，建议使用虚拟滚动或懒加载技术",
      "缓存策略": "可以缓存最近的历史记录，减少数据库查询"
    }
  }
}