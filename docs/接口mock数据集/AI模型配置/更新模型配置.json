{
  "接口信息": {
    "接口路径": "POST /api/config/ai-model",
    "功能说明": "更新或创建AI模型配置，支持本地模型和云端模型配置",
    "请求方式": "POST",
    "Content-Type": "application/json",
    "接口版本": "v1.0.0"
  },
  "请求参数": {
    "本地嵌入模型配置": {
      "model_type": "embedding",
      "provider": "local",
      "model_name": "bge-m3",
      "config": {
        "model_path": "/models/bge-m3",
        "device": "cpu",
        "embedding_dim": 768,
        "max_length": 8192,
        "batch_size": 32,
        "normalize_embeddings": true
      }
    },
    "云端语音模型配置": {
      "model_type": "speech",
      "provider": "cloud",
      "model_name": "aliyun-asr",
      "config": {
        "api_key": "your_api_key_here",
        "access_key_secret": "your_secret_here",
        "endpoint": "https://nls-gateway.cn-shanghai.aliyuncs.com",
        "app_key": "your_app_key",
        "format": "wav",
        "sample_rate": 16000
      }
    },
    "本地视觉模型配置": {
      "model_type": "vision",
      "provider": "local",
      "model_name": "cn-clip",
      "config": {
        "model_path": "/models/cn-clip-vit-base",
        "device": "cpu",
        "image_size": 224,
        "max_text_length": 77
      }
    },
    "云端LLM模型配置": {
      "model_type": "llm",
      "provider": "cloud",
      "model_name": "gpt-3.5-turbo",
      "config": {
        "api_key": "your_openai_key",
        "base_url": "https://api.openai.com/v1",
        "max_tokens": 2048,
        "temperature": 0.7,
        "model_version": "0613"
      }
    },
    "本地Whisper模型配置": {
      "model_type": "speech",
      "provider": "local",
      "model_name": "faster-whisper",
      "config": {
        "model_size": "base",
        "device": "cpu",
        "compute_type": "int8",
        "language": "zh",
        "task": "transcribe"
      }
    },
    "参数无效场景": {
      "model_type": "invalid_type",
      "provider": "invalid_provider",
      "model_name": "",
      "config": {}
    },
    "缺少必要参数场景": {
      "model_type": "embedding",
      "provider": "local",
      "model_name": "bge-m3"
    }
  },
  "响应数据": {
    "创建新配置成功响应": {
      "success": true,
      "message": "AI模型配置创建成功",
      "data": {
        "model_id": 1,
        "model_type": "embedding",
        "provider": "local",
        "model_name": "bge-m3",
        "is_active": true,
        "created_at": "2024-01-20T16:00:00Z",
        "updated_at": "2024-01-20T16:00:00Z",
        "validation_status": "pending",
        "auto_activation": true
      }
    },
    "更新现有配置成功响应": {
      "success": true,
      "message": "AI模型配置更新成功",
      "data": {
        "model_id": 2,
        "model_type": "speech",
        "provider": "cloud",
        "model_name": "aliyun-asr",
        "is_active": true,
        "created_at": "2024-01-15T08:30:00Z",
        "updated_at": "2024-01-20T16:05:00Z",
        "previous_config": {
          "endpoint": "https://nls-gateway.cn-beijing.aliyuncs.com"
        },
        "validation_status": "passed"
      }
    },
    "云端模型配置验证成功响应": {
      "success": true,
      "message": "云端模型配置成功，API连接验证通过",
      "data": {
        "model_id": 3,
        "model_type": "llm",
        "provider": "cloud",
        "model_name": "gpt-3.5-turbo",
        "is_active": true,
        "created_at": "2024-01-20T16:10:00Z",
        "updated_at": "2024-01-20T16:10:00Z",
        "validation_result": {
          "status": "passed",
          "response_time": 1.2,
          "test_query": "Hello, this is a test",
          "test_response": "Hello! How can I help you today?"
        }
      }
    },
    "本地模型配置响应": {
      "success": true,
      "message": "本地模型配置成功",
      "data": {
        "model_id": 4,
        "model_type": "vision",
        "provider": "local",
        "model_name": "cn-clip",
        "is_active": false,
        "created_at": "2024-01-20T16:15:00Z",
        "updated_at": "2024-01-20T16:15:00Z",
        "validation_status": "requires_download",
        "model_info": {
          "size": "1.5GB",
          "download_url": "https://huggingface.co/OFA-Sys/chinese-clip-vit-base-patch16",
          "sha256": "abc123def456...",
          "requires_internet": true
        }
      }
    },
    "参数验证错误响应": {
      "success": false,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "请求参数验证失败",
        "details": "model_type必须为embedding/speech/vision/llm，provider必须为local/cloud，model_name不能为空"
      }
    },
    "模型名称冲突错误响应": {
      "success": false,
      "error": {
        "code": "MODEL_NAME_CONFLICT",
        "message": "模型名称已存在",
        "details": "模型名称'gpt-3.5-turbo'已被使用，请选择其他名称或删除现有配置"
      }
    },
    "云端API验证失败响应": {
      "success": false,
      "error": {
        "code": "CLOUD_API_VALIDATION_FAILED",
        "message": "云端API验证失败",
        "details": "API密钥无效或网络连接失败，请检查配置信息"
      }
    },
    "本地模型路径不存在响应": {
      "success": false,
      "error": {
        "code": "MODEL_PATH_NOT_FOUND",
        "message": "本地模型路径不存在",
        "details": "路径：/models/bge-m3，请检查模型文件是否已下载"
      }
    },
    "配置格式错误响应": {
      "success": false,
      "error": {
        "code": "CONFIG_FORMAT_ERROR",
        "message": "配置参数格式错误",
        "details": "embedding_dim必须是正整数，device必须是cpu/cuda"
      }
    },
    "系统资源不足响应": {
      "success": false,
      "error": {
        "code": "INSUFFICIENT_RESOURCES",
        "message": "系统资源不足，无法加载此模型",
        "details": "模型需要4GB内存，当前可用内存：2.1GB"
      }
    }
  },
  "支持的模型类型": {
    "embedding": {
      "description": "文本嵌入模型，用于语义搜索",
      "providers": ["local", "cloud"],
      "popular_models": ["bge-m3", "text-embedding-ada-002", "sentence-transformers"]
    },
    "speech": {
      "description": "语音识别模型，用于语音转文字",
      "providers": ["local", "cloud"],
      "popular_models": ["faster-whisper", "whisper-1", "aliyun-asr"]
    },
    "vision": {
      "description": "视觉理解模型，用于图像内容分析",
      "providers": ["local", "cloud"],
      "popular_models": ["cn-clip", "gpt-4-vision", "claude-3-vision"]
    },
    "llm": {
      "description": "大语言模型，用于文本理解和生成",
      "providers": ["local", "cloud"],
      "popular_models": ["gpt-3.5-turbo", "claude-instant", "qwen-turbo"]
    }
  },
  "使用说明": {
    "集成方式": "提供模型配置表单，支持不同类型模型的配置界面",
    "测试建议": [
      "测试不同模型类型的配置表单",
      "测试本地和云端模型配置的差异",
      "测试配置验证的各种场景",
      "测试模型加载和卸载功能"
    ],
    "配置验证": {
      "云端模型": "自动验证API连接和权限",
      "本地模型": "检查模型文件存在性和完整性",
      "参数验证": "验证配置参数的格式和取值范围"
    },
    "性能考虑": [
      "大型模型加载需要较长时间",
      "多个模型同时运行会占用大量内存",
      "GPU加速可以显著提升模型性能",
      "建议按需加载模型以节省资源"
    ],
    "安全注意事项": [
      "云端API密钥需要加密存储",
      "敏感配置信息不应记录在日志中",
      "定期轮换API密钥",
      "限制API访问权限"
    ]
  }
}