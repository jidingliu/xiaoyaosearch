{
  "接口信息": {
    "接口路径": "GET /api/index/status/{index_id}",
    "功能说明": "查询指定索引任务的状态和进度信息",
    "请求方式": "GET",
    "Content-Type": "application/json",
    "接口版本": "v1.0.0"
  },
  "请求参数": {
    "正常场景": {
      "index_id": 1
    },
    "不存在的索引场景": {
      "index_id": 999
    },
    "参数无效场景": {
      "index_id": -1
    }
  },
  "响应数据": {
    "处理中状态响应": {
      "success": true,
      "data": {
        "index_id": 1,
        "folder_path": "D:/Documents",
        "status": "processing",
        "progress": 45,
        "total_files": 100,
        "processed_files": 45,
        "error_count": 2,
        "started_at": "2024-01-20T10:00:00Z",
        "completed_at": null,
        "error_message": null,
        "current_file": "D:/Documents/项目报告.docx",
        "processing_speed": "12 文件/秒",
        "estimated_remaining": "4 分 30 秒",
        "file_types_processed": {
          "pdf": 15,
          "docx": 12,
          "txt": 8,
          "md": 6,
          "xlsx": 4
        },
        "errors": [
          {
            "file_path": "D:/Documents/corrupted.pdf",
            "error_message": "文件损坏，无法读取"
          },
          {
            "file_path": "D:/Documents/locked.xlsx",
            "error_message": "文件被其他程序占用"
          }
        ]
      }
    },
    "已完成状态响应": {
      "success": true,
      "data": {
        "index_id": 2,
        "folder_path": "D:/Projects",
        "status": "completed",
        "progress": 100,
        "total_files": 250,
        "processed_files": 245,
        "error_count": 5,
        "started_at": "2024-01-19T14:00:00Z",
        "completed_at": "2024-01-19T14:15:32Z",
        "error_message": null,
        "processing_summary": {
          "total_time": "15 分 32 秒",
          "average_speed": "16 文件/秒",
          "index_size": "1.2GB",
          "documents_indexed": 245
        },
        "file_types_processed": {
          "pdf": 85,
          "docx": 62,
          "txt": 38,
          "md": 25,
          "xlsx": 18,
          "pptx": 12,
          "mp3": 3,
          "mp4": 2
        },
        "errors": [
          {
            "file_path": "D:/Projects/大型视频.mp4",
            "error_message": "文件大小超过500MB限制"
          },
          {
            "file_path": "D:/Projects/加密文档.pdf",
            "error_message": "加密文件，无法解析内容"
          }
        ]
      }
    },
    "失败状态响应": {
      "success": true,
      "data": {
        "index_id": 3,
        "folder_path": "D:/Media",
        "status": "failed",
        "progress": 25,
        "total_files": 80,
        "processed_files": 20,
        "error_count": 1,
        "started_at": "2024-01-20T09:30:00Z",
        "completed_at": "2024-01-20T09:45:12Z",
        "error_message": "磁盘空间不足，无法继续索引",
        "failed_at": "2024-01-20T09:45:12Z",
        "recovery_suggestions": [
          "清理磁盘空间后重试",
          "选择较小的文件夹进行索引",
          "排除大型媒体文件"
        ]
      }
    },
    "暂停状态响应": {
      "success": true,
      "data": {
        "index_id": 4,
        "folder_path": "D:/Archive",
        "status": "paused",
        "progress": 67,
        "total_files": 300,
        "processed_files": 201,
        "error_count": 0,
        "started_at": "2024-01-18T16:00:00Z",
        "paused_at": "2024-01-18T16:25:43Z",
        "completed_at": null,
        "error_message": null,
        "pause_reason": "用户手动暂停",
        "resumable": true
      }
    },
    "排队状态响应": {
      "success": true,
      "data": {
        "index_id": 5,
        "folder_path": "D:/NewProjects",
        "status": "pending",
        "progress": 0,
        "total_files": 150,
        "processed_files": 0,
        "error_count": 0,
        "started_at": null,
        "completed_at": null,
        "error_message": null,
        "queue_position": 2,
        "estimated_start": "约 5 分钟后开始"
      }
    },
    "索引不存在错误响应": {
      "success": false,
      "error": {
        "code": "NOT_FOUND",
        "message": "索引任务不存在",
        "details": "索引ID：999，请检查ID是否正确"
      }
    },
    "参数验证错误响应": {
      "success": false,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "请求参数验证失败",
        "details": "index_id必须是正整数"
      }
    }
  },
  "状态说明": {
    "pending": "排队等待中，有其他任务正在执行",
    "processing": "正在处理，可以查看进度和当前文件",
    "paused": "已暂停，可以恢复执行",
    "completed": "已完成，索引可以正常使用",
    "failed": "执行失败，可以查看错误原因",
    "cancelled": "已取消，不会继续执行"
  },
  "使用说明": {
    "集成方式": "前端应定期轮询此接口，或使用WebSocket实时获取状态更新",
    "测试建议": [
      "测试不同状态下的界面显示效果",
      "测试进度条的准确性和流畅度",
      "测试错误信息的友好显示",
      "测试长时间索引的状态更新"
    ],
    "进度计算": "进度 = (已处理文件数 / 总文件数) * 100",
    "错误处理": [
      "错误数量较少时可以继续执行",
      "严重错误会中断索引过程",
      "提供重试和恢复机制",
      "记录详细的错误日志便于排查"
    ],
    "性能优化": {
      "建议": "对于长时间运行的索引任务，建议使用WebSocket替代轮询",
      "缓存策略": "可以缓存状态信息，减少频繁查询"
    },
    "用户体验": [
      "显示处理速度和剩余时间",
      "提供暂停/继续/取消操作",
      "显示当前正在处理的文件",
      "遇到错误时提供解决建议"
    ]
  }
}