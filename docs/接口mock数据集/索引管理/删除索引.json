{
  "接口信息": {
    "接口路径": "DELETE /api/index/{index_id}",
    "功能说明": "删除指定的索引任务和相关的索引文件",
    "请求方式": "DELETE",
    "Content-Type": "application/json",
    "接口版本": "v1.0.0"
  },
  "请求参数": {
    "正常场景": {
      "index_id": 1
    },
    "删除运行中的索引场景": {
      "index_id": 2
    },
    "删除已完成索引场景": {
      "index_id": 3
    },
    "不存在的索引场景": {
      "index_id": 999
    },
    "参数无效场景": {
      "index_id": -1
    },
    "系统索引场景": {
      "index_id": 0
    }
  },
  "响应数据": {
    "成功删除响应": {
      "success": true,
      "message": "索引删除成功",
      "data": {
        "index_id": 1,
        "deleted_files_count": 156,
        "freed_space": "1.2GB",
        "folder_path": "D:/Documents",
        "deletion_time": "2024-01-20T15:30:00Z"
      }
    },
    "删除运行中索引响应": {
      "success": true,
      "message": "索引任务已停止并删除",
      "data": {
        "index_id": 2,
        "status_before_deletion": "processing",
        "progress_before_deletion": 45,
        "deleted_files_count": 45,
        "freed_space": "350MB",
        "folder_path": "D:/Projects",
        "deletion_time": "2024-01-20T15:25:00Z",
        "warning": "索引任务被强制停止，未处理的文件不会被索引"
      }
    },
    "删除大型索引响应": {
      "success": true,
      "message": "大型索引删除成功，释放了大量磁盘空间",
      "data": {
        "index_id": 3,
        "deleted_files_count": 2847,
        "freed_space": "8.5GB",
        "folder_path": "D:/Archive",
        "deletion_time": "2024-01-20T15:20:00Z",
        "deletion_duration": "2 分 15 秒"
      }
    },
    "索引不存在错误响应": {
      "success": false,
      "error": {
        "code": "NOT_FOUND",
        "message": "索引任务不存在",
        "details": "索引ID：999，请检查ID是否正确"
      }
    },
    "参数验证错误响应": {
      "success": false,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "请求参数验证失败",
        "details": "index_id必须是正整数"
      }
    },
    "删除系统索引错误响应": {
      "success": false,
      "error": {
        "code": "FORBIDDEN",
        "message": "不能删除系统内置索引",
        "details": "索引ID：0 为系统保留索引，不允许删除"
      }
    },
    "权限不足错误响应": {
      "success": false,
      "error": {
        "code": "PERMISSION_DENIED",
        "message": "没有删除该索引的权限",
        "details": "该索引正在被其他用户使用，或需要管理员权限"
      }
    },
    "文件删除失败响应": {
      "success": true,
      "message": "索引删除成功，但有部分文件无法删除",
      "data": {
        "index_id": 4,
        "deleted_files_count": 142,
        "failed_deletions": 3,
        "freed_space": "980MB",
        "folder_path": "D:/Shared",
        "deletion_time": "2024-01-20T15:15:00Z",
        "failed_files": [
          {
            "file_path": "D:/Shared/locked_file.pdf.idx",
            "reason": "文件被其他程序占用"
          },
          {
            "file_path": "D:/Shared/protected_folder.idx",
            "reason": "没有删除权限"
          }
        ],
        "warning": "有3个索引文件删除失败，可能占用额外磁盘空间"
      }
    },
    "磁盘操作错误响应": {
      "success": false,
      "error": {
        "code": "DISK_OPERATION_FAILED",
        "message": "磁盘操作失败",
        "details": "索引文件可能已损坏，无法正常删除，建议手动清理"
      }
    }
  },
  "使用说明": {
    "集成方式": "删除操作是异步的，对于大型索引可能需要较长时间",
    "测试建议": [
      "测试删除不同状态索引的处理",
      "测试删除失败时的错误处理",
      "测试删除操作的确认对话框",
      "测试删除后界面状态的更新"
    ],
    "安全考虑": [
      "删除操作不可逆，建议添加确认步骤",
      "删除运行中的索引会停止任务",
      "大型索引删除可能影响系统性能",
      "删除后会释放相应的磁盘空间"
    ],
    "用户体验": [
      "显示删除进度和预计时间",
      "提供删除前的确认提示",
      "显示释放的磁盘空间",
      "删除失败时提供解决建议"
    ],
    "批量操作": {
      "支持": "当前接口仅支持单个索引删除，批量删除需要多次调用",
      "建议": "对于大量索引删除，建议分批进行以避免系统负载过高"
    },
    "影响范围": [
      "删除索引会影响搜索功能",
      "相关文件的搜索结果将不再可用",
      "需要重新创建索引才能恢复搜索",
      "不会删除原始文件"
    ]
  }
}