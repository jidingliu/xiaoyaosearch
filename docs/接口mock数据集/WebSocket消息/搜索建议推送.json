{
  "接口信息": {
    "接口路径": "ws://127.0.0.1:8000/ws/search-suggest",
    "功能说明": "实时搜索建议和自动完成WebSocket服务",
    "连接方式": "WebSocket",
    "协议版本": "v1.0.0",
    "消息格式": "JSON"
  },
  "交互流程": {
    "客户端发送": {
      "action": "suggest",
      "data": {
        "query": "人工智",
        "limit": 5,
        "context": {
          "search_history": ["机器学习", "深度学习"],
          "recent_files": ["AI报告.pdf", "技术文档.docx"],
          "user_preferences": {
            "file_types": ["pdf", "docx"],
            "language": "zh-CN"
          }
        }
      }
    }
  },
  "消息类型": {
    "suggestions": "搜索建议消息",
    "auto_complete": "自动完成消息",
    "trending_searches": "热门搜索消息",
    "related_queries": "相关查询消息",
    "error": "错误消息",
    "heartbeat": "心跳消息"
  },
  "消息数据": {
    "搜索建议消息": {
      "type": "suggestions",
      "data": {
        "query": "人工智",
        "suggestions": [
          {
            "text": "人工智能",
            "type": "complete",
            "highlight": "<em>人工智</em>能",
            "description": "热门搜索词",
            "estimated_results": 1250,
            "popularity_score": 95,
            "category": "technology"
          },
          {
            "text": "人工智能技术",
            "type": "extension",
            "highlight": "<em>人工智</em>能技术",
            "description": "AI相关技术文档",
            "estimated_results": 856,
            "popularity_score": 88,
            "category": "technology"
          },
          {
            "text": "人工智能发展趋势",
            "type": "extension",
            "highlight": "<em>人工智</em>能发展趋势",
            "description": "包含15个相关文档",
            "estimated_results": 234,
            "popularity_score": 76,
            "category": "trending"
          },
          {
            "text": "人工智能应用",
            "type": "extension",
            "highlight": "<em>人工智</em>能应用",
            "description": "实际应用案例分析",
            "estimated_results": 445,
            "popularity_score": 72,
            "category": "application"
          },
          {
            "text": "人工智能算法",
            "type": "extension",
            "highlight": "<em>人工智</em>能算法",
            "description": "算法实现和优化",
            "estimated_results": 678,
            "popularity_score": 69,
            "category": "algorithm"
          }
        ],
        "total_suggestions": 5,
        "query_time": 0.015,
        "cache_hit": true,
        "timestamp": "2024-01-20T14:30:00Z"
      }
    },
    "自动完成消息": {
      "type": "auto_complete",
      "data": {
        "original_query": "深度学",
        "completed_query": "深度学习",
        "confidence": 0.95,
        "completion_type": "auto_correction",
        "reason": "常见拼写错误自动纠正",
        "suggested_alternatives": [
          {
            "text": "深度学习算法",
            "description": "更具体的搜索词"
          },
          {
            "text": "深度学习框架",
            "description": "相关工具和库"
          }
        ],
        "timestamp": "2024-01-20T14:31:15Z"
      }
    },
    "相关查询消息": {
      "type": "related_queries",
      "data": {
        "original_query": "机器学习",
        "related_queries": [
          {
            "query": "深度学习",
            "relation": "hierarchy",
            "similarity_score": 0.92,
            "description": "机器学习的重要分支",
            "result_count": 856
          },
          {
            "query": "神经网络",
            "relation": "technology",
            "similarity_score": 0.87,
            "description": "机器学习的核心技术",
            "result_count": 623
          },
          {
            "query": "监督学习",
            "relation": "category",
            "similarity_score": 0.85,
            "description": "机器学习的主要类型",
            "result_count": 412
          },
          {
            "query": "Python机器学习",
            "relation": "application",
            "similarity_score": 0.79,
            "description": "使用Python进行机器学习",
            "result_count": 334
          },
          {
            "query": "数据挖掘",
            "relation": "related",
            "similarity_score": 0.74,
            "description": "相关领域技术",
            "result_count": 289
          }
        ],
        "relation_types": ["hierarchy", "technology", "category", "application", "related"],
        "timestamp": "2024-01-20T14:32:00Z"
      }
    },
    "热门搜索消息": {
      "type": "trending_searches",
      "data": {
        "time_range": "last_24_hours",
        "trending_queries": [
          {
            "query": "ChatGPT应用",
            "trend_score": 98,
            "growth_rate": "+250%",
            "search_count": 1256,
            "description": "ChatGPT相关应用和案例",
            "category": "ai_tools"
          },
          {
            "query": "数据分析方法",
            "trend_score": 87,
            "growth_rate": "+180%",
            "search_count": 892,
            "description": "各种数据分析技术和工具",
            "category": "data_science"
          },
          {
            "query": "项目管理最佳实践",
            "trend_score": 76,
            "growth_rate": "+120%",
            "search_count": 634,
            "description": "项目管理流程和方法",
            "category": "management"
          },
          {
            "query": "云原生架构",
            "trend_score": 72,
            "growth_rate": "+95%",
            "search_count": 523,
            "description": "云原生应用设计和部署",
            "category": "cloud_computing"
          },
          {
            "query": "前端框架对比",
            "trend_score": 68,
            "growth_rate": "+85%",
            "search_count": 445,
            "description": "主流前端框架比较分析",
            "category": "web_development"
          }
        ],
        "categories": ["ai_tools", "data_science", "management", "cloud_computing", "web_development"],
        "update_time": "2024-01-20T14:00:00Z"
      }
    },
    "个性化建议消息": {
      "type": "personalized_suggestions",
      "data": {
        "user_id": "user_12345",
        "query": "Python",
        "suggestions": [
          {
            "text": "Python编程基础",
            "type": "history_based",
            "reason": "您之前搜索过类似内容",
            "last_searched": "2024-01-19T10:30:00Z",
            "personalization_score": 0.92
          },
          {
            "text": "Python数据分析",
            "type": "file_based",
            "reason": "基于您的文件内容推荐",
            "related_files": ["数据分析报告.pdf", "Python脚本.py"],
            "personalization_score": 0.88
          },
          {
            "text": "Python Web框架",
            "type": "preference_based",
            "reason": "符合您的技术偏好",
            "user_profile_tags": ["web_development", "backend"],
            "personalization_score": 0.79
          }
        ],
        "personalization_level": "high",
        "timestamp": "2024-01-20T14:33:00Z"
      }
    },
    "文件类型建议消息": {
      "type": "file_type_suggestions",
      "data": {
        "query": "报告",
        "suggestions_by_type": {
          "document": [
            {
              "text": "项目报告模板",
              "file_types": ["docx", "pdf"],
              "result_count": 45,
              "description": "各种报告模板和格式"
            },
            {
              "text": "技术分析报告",
              "file_types": ["pdf", "docx"],
              "result_count": 23,
              "description": "技术分析和评估报告"
            }
          ],
          "spreadsheet": [
            {
              "text": "数据分析报告",
              "file_types": ["xlsx", "csv"],
              "result_count": 18,
              "description": "数据统计和分析报告"
            }
          ],
          "presentation": [
            {
              "text": "项目汇报PPT",
              "file_types": ["pptx"],
              "result_count": 12,
              "description": "项目汇报演示文稿"
            }
          ]
        },
        "total_files_found": 98,
        "timestamp": "2024-01-20T14:34:00Z"
      }
    },
    "多语言建议消息": {
      "type": "multilingual_suggestions",
      "data": {
        "query": "AI",
        "suggestions": [
          {
            "text": "人工智能",
            "language": "zh-CN",
            "type": "translation",
            "confidence": 0.95,
            "result_count": 1250
          },
          {
            "text": "Artificial Intelligence",
            "language": "en-US",
            "type": "original",
            "confidence": 1.0,
            "result_count": 856
          },
          {
            "text": "人工智慧",
            "language": "zh-TW",
            "type": "regional_variant",
            "confidence": 0.88,
            "result_count": 234
          }
        ],
        "supported_languages": ["zh-CN", "en-US", "zh-TW"],
        "user_language": "zh-CN",
        "timestamp": "2024-01-20T14:35:00Z"
      }
    },
    "搜索历史建议消息": {
      "type": "history_suggestions",
      "data": {
        "query": "机器",
        "history_matches": [
          {
            "text": "机器学习算法",
            "searched_at": "2024-01-19T15:30:00Z",
            "frequency": 5,
            "last_result_count": 23,
            "success_rate": 100
          },
          {
            "text": "机器视觉应用",
            "searched_at": "2024-01-18T09:15:00Z",
            "frequency": 2,
            "last_result_count": 45,
            "success_rate": 100
          },
          {
            "text": "机器翻译技术",
            "searched_at": "2024-01-17T14:20:00Z",
            "frequency": 1,
            "last_result_count": 12,
            "success_rate": 100
          }
        ],
        "total_history_items": 3,
        "timestamp": "2024-01-20T14:36:00Z"
      }
    },
    "错误消息": {
      "type": "error",
      "data": {
        "error_code": "QUERY_TOO_SHORT",
        "error_message": "搜索查询太短，至少需要2个字符",
        "original_query": "A",
        "suggestion": "请输入更具体的搜索词",
        "timestamp": "2024-01-20T14:37:00Z"
      }
    },
    "服务不可用错误消息": {
      "type": "error",
      "data": {
        "error_code": "SERVICE_UNAVAILABLE",
        "error_message": "搜索建议服务暂时不可用",
        "retry_after": 30,
        "alternative_suggestion": "您可以直接进行搜索",
        "timestamp": "2024-01-20T14:38:00Z"
      }
    },
    "心跳消息": {
      "type": "heartbeat",
      "data": {
        "server_time": "2024-01-20T14:39:00Z",
        "connection_id": "suggest_conn_1234567890",
        "uptime": "25 分 30 秒",
        "requests_served": 156,
        "cache_hit_rate": "78%",
        "timestamp": "2024-01-20T14:39:00Z"
      }
    }
  },
  "使用说明": {
    "集成方式": "在搜索框中建立WebSocket连接，实时获取搜索建议",
    "使用场景": [
      "搜索自动完成",
      "相关查询推荐",
      "热门搜索展示",
      "个性化建议"
    ],
    "性能优化": {
      "防抖动": "避免频繁请求，设置合理的延迟",
      "缓存机制": "常见查询结果缓存，提高响应速度",
      "预加载": "用户输入时预判可能的搜索意图"
    },
    "用户体验": [
      "即时反馈用户输入",
      "提供多样化的搜索建议",
      "支持键盘导航选择",
      "显示搜索结果预估数量"
    ],
    "隐私保护": [
      "可选的个性化功能",
      "搜索历史加密存储",
      "用户可以清除建议数据",
      "遵循隐私保护法规"
    ],
    "配置选项": {
      "建议数量": "可配置显示的建议数量",
      "更新频率": "控制建议更新的频率",
      "语言设置": "支持多语言建议",
      "个性化级别": "调节个性化程度"
    }
  }
}