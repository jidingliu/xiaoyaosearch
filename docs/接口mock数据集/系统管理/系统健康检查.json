{
  "接口信息": {
    "接口路径": "GET /api/system/health",
    "功能说明": "检查系统各个组件的健康状态，包括数据库、AI模型、索引等",
    "请求方式": "GET",
    "Content-Type": "application/json",
    "接口版本": "v1.0.0"
  },
  "请求参数": {
    "正常场景": {
      "说明": "无需参数，返回完整健康状态"
    },
    "详细检查场景": {
      "detailed": true
    },
    "快速检查场景": {
      "quick": true
    }
  },
  "响应数据": {
    "系统健康状态良好响应": {
      "success": true,
      "data": {
        "status": "healthy",
        "overall_score": 95,
        "uptime": "5天 12小时 30分钟",
        "version": "1.0.0",
        "timestamp": "2024-01-20T16:50:00Z",
        "database": {
          "status": "healthy",
          "response_time": 0.002,
          "connection_pool": {
            "active": 2,
            "idle": 8,
            "total": 10,
            "utilization": "20%"
          },
          "size": "245.7MB",
          "last_backup": "2024-01-20T04:00:00Z",
          "backup_age": "12小时50分钟"
        },
        "ai_models": {
          "status": "healthy",
          "loaded_models": 2,
          "total_models": 4,
          "bge_m3": {
            "status": "loaded",
            "memory_usage": "2.1GB",
            "response_time": 0.12,
            "last_used": "2024-01-20T16:45:00Z",
            "test_result": "passed",
            "accuracy": "95.2%"
          },
          "cn_clip": {
            "status": "loaded",
            "memory_usage": "1.5GB",
            "response_time": 0.25,
            "last_used": "2024-01-20T14:20:00Z",
            "test_result": "passed",
            "accuracy": "87.8%"
          },
          "faster_whisper": {
            "status": "not_loaded",
            "memory_usage": "0MB",
            "load_time": "预计15秒",
            "last_test": "2024-01-19T10:30:00Z",
            "test_result": "passed"
          },
          "gpt_3_5_turbo": {
            "status": "available",
            "provider": "OpenAI",
            "response_time": 1.2,
            "last_test": "2024-01-20T10:00:00Z",
            "test_result": "passed",
            "api_quota": "85% used"
          }
        },
        "indexes": {
          "status": "healthy",
          "faiss_index": {
            "status": "ready",
            "document_count": 15420,
            "index_size": "2.8GB",
            "last_updated": "2024-01-20T10:15:00Z",
            "optimization_status": "optimized"
          },
          "whoosh_index": {
            "status": "ready",
            "document_count": 15420,
            "index_size": "1.2GB",
            "last_updated": "2024-01-20T10:15:00Z",
            "optimization_status": "optimized"
          },
          "active_indexes": 2,
          "total_indexes": 3,
          "pending_rebuild": 0
        },
        "system_resources": {
          "status": "healthy",
          "cpu": {
            "usage": "25%",
            "cores": 8,
            "temperature": "正常",
            "load_average": [0.5, 0.8, 1.2]
          },
          "memory": {
            "usage": "6.2GB/16GB",
            "percentage": "38.75%",
            "available": "9.8GB",
            "swap_usage": "0MB"
          },
          "disk": {
            "usage": "45.2GB/256GB",
            "percentage": "17.7%",
            "available": "210.8GB",
            "read_speed": "520MB/s",
            "write_speed": "480MB/s"
          },
          "gpu": {
            "available": false,
            "reason": "未安装CUDA驱动"
          }
        },
        "services": {
          "search_service": {
            "status": "running",
            "uptime": "5天12小时",
            "requests_today": 1542,
            "avg_response_time": "0.18秒",
            "error_rate": "0.1%"
          },
          "index_service": {
            "status": "running",
            "uptime": "5天12小时",
            "active_jobs": 0,
            "completed_jobs_today": 3,
            "avg_processing_time": "12分钟"
          },
          "api_service": {
            "status": "running",
            "uptime": "5天12小时",
            "endpoints": 12,
            "requests_today": 2108,
            "error_rate": "0.05%"
          }
        },
        "network": {
          "status": "healthy",
          "connectivity": "正常",
          "latency": {
            "local": "0.1ms",
            "domestic": "25ms",
            "international": "150ms"
          },
          "bandwidth": {
            "download": "950Mbps",
            "upload": "450Mbps"
          },
          "dns_resolution": "正常",
          "proxy_status": "未配置"
        },
        "security": {
          "status": "secure",
          "ssl_certificates": "有效",
          "firewall": "启用",
          "virus_scanner": "运行中",
          "last_security_scan": "2024-01-20T02:00:00Z",
          "threats_detected": 0
        }
      }
    },
    "系统存在警告响应": {
      "success": true,
      "data": {
        "status": "warning",
        "overall_score": 78,
        "warnings": [
          {
            "component": "ai_models.gpt_3_5_turbo",
            "message": "API配额使用率过高",
            "severity": "medium",
            "recommendation": "监控API使用量或升级套餐"
          },
          {
            "component": "system_resources.memory",
            "message": "内存使用率偏高",
            "severity": "low",
            "recommendation": "考虑关闭不必要的应用程序"
          }
        ],
        "database": {
          "status": "healthy",
          "response_time": 0.003
        },
        "ai_models": {
          "status": "warning",
          "loaded_models": 2,
          "issues": [
            {
              "model": "gpt_3_5_turbo",
              "issue": "API配额使用85%",
              "impact": "可能影响云端搜索功能"
            }
          ]
        },
        "system_resources": {
          "status": "warning",
          "memory": {
            "usage": "12.8GB/16GB",
            "percentage": "80%"
          }
        }
      }
    },
    "系统存在错误响应": {
      "success": true,
      "data": {
        "status": "error",
        "overall_score": 45,
        "errors": [
          {
            "component": "database",
            "message": "数据库连接池耗尽",
            "severity": "high",
            "impact": "搜索功能不可用",
            "recommendation": "重启数据库服务或增加连接池大小"
          },
          {
            "component": "indexes.faiss_index",
            "message": "向量索引文件损坏",
            "severity": "high",
            "impact": "语义搜索功能不可用",
            "recommendation": "重建索引或从备份恢复"
          }
        ],
        "database": {
          "status": "error",
          "error_message": "连接池耗尽",
          "connection_pool": {
            "active": 10,
            "idle": 0,
            "total": 10,
            "utilization": "100%"
          }
        },
        "ai_models": {
          "status": "partial",
          "loaded_models": 1,
          "failed_models": 1
        },
        "indexes": {
          "status": "error",
          "faiss_index": {
            "status": "corrupted",
            "error_message": "索引文件损坏"
          }
        }
      }
    },
    "快速检查响应": {
      "success": true,
      "data": {
        "status": "healthy",
        "timestamp": "2024-01-20T16:50:00Z",
        "database": {
          "status": "connected"
        },
        "ai_models": {
          "status": "operational",
          "loaded_count": 2
        },
        "indexes": {
          "status": "ready"
        },
        "system_resources": {
          "status": "normal"
        }
      }
    },
    "服务不可用响应": {
      "success": false,
      "error": {
        "code": "SERVICE_UNAVAILABLE",
        "message": "系统健康检查服务暂时不可用",
        "details": "健康检查模块正在维护或重启",
        "estimated_recovery": "2-3分钟"
      }
    },
    "超时响应": {
      "success": false,
      "error": {
        "code": "TIMEOUT",
        "message": "健康检查超时",
        "details": "某些组件响应时间过长",
        "timeout_components": ["database", "network_check"],
        "suggestions": [
          "检查数据库连接",
          "验证网络配置",
          "重启相关服务"
        ]
      }
    }
  },
  "状态说明": {
    "healthy": "系统运行正常，所有组件健康",
    "warning": "系统运行正常但存在警告，需要关注",
    "error": "系统存在错误，部分功能不可用",
    "critical": "系统严重故障，大部分功能不可用"
  },
  "健康评分标准": {
    "90-100": "优秀 - 系统运行完美",
    "80-89": "良好 - 系统运行正常，轻微问题",
    "70-79": "一般 - 系统可用但需要关注",
    "60-69": "较差 - 存在明显问题，影响功能",
    "0-59": "严重 - 系统故障，需要立即处理"
  },
  "使用说明": {
    "集成方式": "提供系统状态监控面板，实时显示各组件健康状态",
    "检查频率": {
      "建议": "生产环境每5分钟检查一次",
      "详细模式": "可降低频率以节省资源",
      "快速模式": "适合高频率监控"
    },
    "监控指标": [
      "组件响应时间",
      "资源使用率",
      "错误率统计",
      "服务可用性"
    ],
    "告警机制": {
      "阈值设置": "自定义各指标的告警阈值",
      "通知方式": "支持邮件、短信、桌面通知",
      "告警级别": "信息、警告、错误、严重"
    },
    "故障排除": {
      "自动诊断": "提供常见问题的自动诊断",
      "修复建议": "针对问题给出解决方案",
      "一键修复": "部分问题支持自动修复"
    },
    "历史数据": {
      "趋势分析": "跟踪性能变化趋势",
      "预测维护": "基于历史数据预测故障",
      "容量规划": "为资源扩容提供数据支持"
    }
  }
}