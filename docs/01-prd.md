# PRD：小遥搜索 XiaoyaoSearch MVP版本

## 1. 产品定位（一句话）
为知识工作者、内容创作者和技术开发者提供多模态AI智能搜索能力的本地桌面应用

## 2. 用户故事（核心场景）

**场景1：语音搜索回忆内容**
- 作为内容创作者
- 我想要通过语音描述"我昨天录制的那个关于AI趋势的讨论"
- 以便于快速找到具体的音频文件和相关内容

**场景2：图片相似搜索**
- 作为设计师
- 我想要上传一张设计图寻找相似的文字描述或相关文档
- 以便于定位到相关的项目文件和参考资料

**场景3：语义内容搜索**
- 作为研究员
- 我想要搜索"关于机器学习算法优化的方法"
- 以便于在大量文档中找到相关的研究笔记和论文

**场景4：跨文件类型检索**
- 作为开发者
- 我想要搜索"之前讨论的API接口设计问题"
- 以便于找到相关的代码文件、会议记录和技术文档

## 3. 功能清单（MVP范围）

### P0功能（必须有）
- [ ] 多模态输入功能：支持语音输入（30秒内）、文本输入、图片上传（PNG/JPG）
- [ ] AI语义转换：将用户输入转换为搜索语义，支持自然语言理解
- [ ] 本地文件索引：支持对指定文件夹建立文件索引，包含文件名和内容
- [ ] 多格式文件搜索：支持视频（mp4、avi）、音频（mp3、wav）、文档（txt、markdown、office、pdf）
- [ ] 搜索结果展示：按相关度排序，支持预览和快速定位
- [ ] AI模型配置：支持云端API和本地Ollama模型切换

### P1功能（最好有）
- [ ] 语音识别模型配置：支持云端API和本地FastWhisper
- [ ] 视觉模型配置：支持云端API和本地视觉模型
- [ ] 索引管理：文件夹选择、索引重建、删除索引
- [ ] 搜索历史记录：保存和管理用户搜索历史

### P2功能（未来考虑）
- [ ] 高级筛选：按文件类型、时间、大小筛选
- [ ] 收藏夹功能：重要文件收藏和分类
- [ ] 导出功能：搜索结果导出为报告

## 4. 核心流程图
```
用户启动应用 → 首次设置配置 → 选择索引文件夹 → 建立文件索引
    ↓
输入搜索内容（语音/文本/图片）→ AI语义转换 → 执行本地搜索
    ↓
展示搜索结果 → 文件预览 → 打开文件位置 → 满意度反馈
```

## 5. 页面结构

### 搜索主页面
- 搜索输入框（支持语音、文本、图片输入）
- AI模型状态指示器
- 搜索结果列表（文件预览、相关度评分）
- 快捷操作按钮（预览、打开位置、收藏）

### 设置页面
- **LLM模型设置**
  - 云端API配置：API地址、访问令牌、模型名称
  - 本地Ollama配置：API地址、模型名称
- **语音识别设置**
  - 云端API配置：API地址、访问令牌
  - 本地FastWhisper（一键启用）
- **视觉模型设置**
  - 云端API配置：API地址、访问令牌、视觉模型名称
  - 本地视觉模型（一键启用）

### 索引管理页面
- 文件夹选择器
- 索引状态监控
- 重建/删除索引操作
- 索引统计信息

### 帮助与关于页面
- 使用教程
- 常见问题
- 版本信息
- 联系支持

## 6. 数据埋点计划

| 事件 | 触发时机 | 关键参数 |
|------|---------|---------|
| app_start | 应用启动 | app_version, platform |
| search_input | 用户输入搜索内容 | input_type(voice/text/image), input_length |
| search_execute | 执行搜索 | ai_model, search_type |
| search_result | 搜索结果返回 | result_count, response_time |
| file_preview | 预览文件 | file_type, file_size |
| file_open | 打开文件 | file_path, open_type |
| model_switch | 切换AI模型 | old_model, new_model |
| folder_index | 文件夹索引操作 | folder_path, action(create/update/delete) |
| settings_change | 设置变更 | setting_type, old_value, new_value |
| error_occurred | 错误发生 | error_type, error_message |

## 7. 非功能需求

### 性能要求
- 应用启动时间 < 3秒
- 搜索响应时间 < 2秒
- 文件预览加载时间 < 1秒
- 支持10万+文件的本地索引

### 兼容性要求
- Windows 10/11 x64
- macOS 10.15+ (Intel/M1)
- 最低内存要求：4GB RAM
- 推荐内存要求：8GB+ RAM
- 磁盘空间：500MB应用 + 索引空间

### 安全要求
- 本地数据加密存储
- API密钥安全保存
- 用户数据不上传云端
- 支持隐私模式（不记录搜索历史）

### 可用性要求
- 支持中英文界面
- 无障碍访问支持
- 键盘快捷键支持
- 深色/浅色主题切换

---
**预计开发时间：** 8-10周
**上线时间目标：** 2026年2月底